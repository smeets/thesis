\chapter{Methodology}

This chapter describes the methodology used to analyse the models.

The general methodology of the evaluation was to iterate back and forth between model parameters and router metrics until both datasets could be compared. Metrics were in some cases also analysed if they behaved as expected, were accurate or precise.

\begin{verbatim}
  +-> model selection --> list of parameters --+
  |                                            |
  +-- parameter analysis <-- data collection <-+
\end{verbatim}

\section{Model Selection}

The evaluated model is Felemban-Ekici.

\section{Model Parameters}
The first step was to analyse the theoretical models.

To run the Felemban-Ekici model the following properties are required:

\begin{itemize}
	\item \emph{N}, the number of network nodes
	\item $CW_{min}$ and $CW_{max}$, contention window min and max size
	\item \emph{E[D]}, the mean payload size
	\item channel bit rate
	\item $L$, the \texttt{ShortRetryLimit}
\end{itemize}

The Felemban-Ekici model provides metrics such as normalized throughput ($U$), channel access delay and probability of packet collision. Thus, in order to evaluate the model, a set of equivalent metrics must be collected from the router.

\section{Tool}

On the router side three programs, which provide access to network interface data, were tested and evaluated:

\begin{enumerate}
	\item ubus - openwrt interface
	\item qcsapi - quantenna interface
	\item wl - driver interface
\end{enumerate}

In the end, ubus was chosen as it was found to be more consistent than the qcsapi.

\section{Router Metrics}
Selecting a set of metrics which are equivalent to the model parameters.

This required a good understanding oh how the constraints of the model affected the selection of router metrics, e.g. the model separates CTS-RTS and Basic mode while the router automatically decides which to use based on packet payload size, which isn't available to any tool.

In order to evaluate the models we needed these metrics:

\begin{itemize}
\item rssi
\item nodes
\item logical tx/rx rates
\item physical tx/rx rates
\end{itemize}

\section{Metric Analysis}

We must analyse the validity of the reported parameters.

Do this with experimentation in the radio lab.

We want to analyse the reported values for RSSI, SNR, broken \& valid IEEE 802.11 frames.

Using quantenna and wl API:s to query:
\begin{itemize}
    \item \texttt{wl assoclist} $\rightarrow$ \texttt{wl rssi}
    \item \texttt{ubus call wireless.radio.monitor get}
    \item \texttt{qcsapi get\_rssi\_per\_association "wifi0"}
\end{itemize}
